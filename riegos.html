<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Riego - Finca La Herradura</title>
    
    <!-- CSS Framework -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Estilos específicos -->
    <link rel="stylesheet" href="css/main.css">
    
    <style>
        /* ===== CORRECCIONES RESPONSIVE PARA RIEGOS.HTML ===== */
/* Reemplazar el CSS del <style> en riegos.html con este código mejorado */

/* ===== HEADER RESPONSIVE ===== */
.riegos-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

@media (max-width: 768px) {
    .riegos-header {
        flex-direction: column;
        align-items: stretch;
        margin-bottom: 1.5rem;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .riegos-header {
        margin-bottom: 1rem;
        gap: 0.5rem;
    }
}

.page-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    .page-title {
        justify-content: center;
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .page-title {
        gap: 0.5rem;
    }
}

.title-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .title-icon {
        width: 48px;
        height: 48px;
        font-size: 1.25rem;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .title-icon {
        width: 40px;
        height: 40px;
        font-size: 1rem;
        border-radius: 8px;
    }
}

.page-title h1 {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
    color: #1f2937;
}

@media (max-width: 768px) {
    .page-title h1 {
        font-size: 1.75rem;
    }
}

@media (max-width: 480px) {
    .page-title h1 {
        font-size: 1.5rem;
    }
}

.page-title p {
    font-size: 1rem;
    color: #6b7280;
    margin: 0;
}

@media (max-width: 768px) {
    .page-title p {
        font-size: 0.875rem;
    }
}

@media (max-width: 480px) {
    .page-title p {
        font-size: 0.8rem;
    }
}

.header-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    align-items: center;
}

@media (max-width: 768px) {
    .header-actions {
        width: 100%;
        justify-content: center;
        gap: 0.5rem;
    }
}

@media (max-width: 640px) {
    .header-actions {
        flex-direction: column;
        align-items: stretch;
    }
    
    .header-actions .btn {
        width: 100%;
        justify-content: center;
    }
}

/* ===== ESTADO DEL SISTEMA RESPONSIVE ===== */
.estado-sistema {
    background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    color: white;
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
}

@media (max-width: 768px) {
    .estado-sistema {
        padding: 1.5rem;
        border-radius: 16px;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .estado-sistema {
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
    }
}

.sistema-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    position: relative;
    z-index: 1;
    flex-wrap: wrap;
    gap: 1rem;
}

@media (max-width: 768px) {
    .sistema-header {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 1.5rem;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .sistema-header {
        margin-bottom: 1rem;
        gap: 0.5rem;
    }
}

.sistema-titulo {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    .sistema-titulo {
        font-size: 1.75rem;
        gap: 0.75rem;
    }
}

@media (max-width: 640px) {
    .sistema-titulo {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
}

@media (max-width: 480px) {
    .sistema-titulo {
        font-size: 1.5rem;
    }
}

.sistema-estado {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1.5rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    white-space: nowrap;
}

@media (max-width: 768px) {
    .sistema-estado {
        padding: 0.5rem 1rem;
        gap: 0.5rem;
        border-radius: 16px;
    }
}

@media (max-width: 480px) {
    .sistema-estado {
        padding: 0.4rem 0.75rem;
        border-radius: 12px;
        font-size: 0.875rem;
    }
}

.metricas-riego {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1.5rem;
    position: relative;
    z-index: 1;
}

@media (max-width: 1024px) {
    .metricas-riego {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .metricas-riego {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
    }
}

@media (max-width: 640px) {
    .metricas-riego {
        grid-template-columns: 1fr;
        gap: 0.5rem;
    }
}

.metrica-item {
    text-align: center;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

@media (max-width: 768px) {
    .metrica-item {
        padding: 1rem;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .metrica-item {
        padding: 0.75rem;
        border-radius: 8px;
    }
}

.metrica-icon {
    font-size: 2rem;
    margin-bottom: 0.75rem;
}

@media (max-width: 768px) {
    .metrica-icon {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }
}

@media (max-width: 480px) {
    .metrica-icon {
        font-size: 1.25rem;
        margin-bottom: 0.4rem;
    }
}

.metrica-valor {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

@media (max-width: 768px) {
    .metrica-valor {
        font-size: 1.75rem;
    }
}

@media (max-width: 480px) {
    .metrica-valor {
        font-size: 1.5rem;
    }
}

.metrica-label {
    font-size: 0.875rem;
    opacity: 0.9;
}

@media (max-width: 480px) {
    .metrica-label {
        font-size: 0.8rem;
    }
}

.metrica-cambio {
    font-size: 0.75rem;
    margin-top: 0.25rem;
    opacity: 0.8;
}

@media (max-width: 480px) {
    .metrica-cambio {
        font-size: 0.7rem;
    }
}

/* ===== PANEL DE CONTROL RESPONSIVE ===== */
.control-panel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

@media (max-width: 1024px) {
    .control-panel {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
}

@media (max-width: 768px) {
    .control-panel {
        grid-template-columns: 1fr;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .control-panel {
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
}

.control-card {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 1.5rem;
    position: relative;
    border-left: 4px solid transparent;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@media (max-width: 768px) {
    .control-card {
        padding: 1.25rem;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .control-card {
        padding: 1rem;
        border-radius: 8px;
        border-left-width: 3px;
    }
}

.control-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

@media (max-width: 640px) {
    .control-header {
        flex-direction: column;
        align-items: flex-start;
    }
}

.control-titulo {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .control-titulo {
        font-size: 1rem;
    }
}

@media (max-width: 480px) {
    .control-titulo {
        font-size: 0.9rem;
    }
}

.control-estado {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    white-space: nowrap;
}

@media (max-width: 768px) {
    .control-estado {
        padding: 0.2rem 0.6rem;
        font-size: 0.7rem;
        border-radius: 16px;
    }
}

@media (max-width: 480px) {
    .control-estado {
        padding: 0.15rem 0.5rem;
        font-size: 0.65rem;
        border-radius: 12px;
    }
}

.control-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
}

@media (max-width: 640px) {
    .control-info {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .control-info {
        gap: 0.5rem;
    }
}

.info-item {
    text-align: center;
    padding: 0.75rem;
    background: rgba(0, 0, 0, 0.02);
    border-radius: 8px;
}

@media (max-width: 768px) {
    .info-item {
        padding: 0.5rem;
        border-radius: 6px;
    }
}

@media (max-width: 480px) {
    .info-item {
        padding: 0.4rem;
        border-radius: 4px;
    }
}

.info-valor {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .info-valor {
        font-size: 1.125rem;
    }
}

@media (max-width: 480px) {
    .info-valor {
        font-size: 1rem;
    }
}

.info-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    margin-top: 0.25rem;
}

@media (max-width: 480px) {
    .info-label {
        font-size: 0.7rem;
    }
}

.control-acciones {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

@media (max-width: 640px) {
    .control-acciones {
        flex-direction: column;
        gap: 0.4rem;
    }
}

.btn-control {
    flex: 1;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all 0.3s ease;
    white-space: nowrap;
    min-height: 36px;
}

@media (max-width: 768px) {
    .btn-control {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
        border-radius: 6px;
        min-height: 40px;
    }
}

@media (max-width: 640px) {
    .btn-control {
        flex: none;
        width: 100%;
        justify-content: center;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
}

@media (max-width: 480px) {
    .btn-control {
        padding: 0.35rem 0.7rem;
        font-size: 0.75rem;
        min-height: 44px;
    }
}

/* ===== CONTENIDO PRINCIPAL RESPONSIVE ===== */
.contenido-principal {
    display: grid;
    grid-template-columns: 1fr 350px;
    gap: 2rem;
    margin-bottom: 2rem;
}

@media (max-width: 1024px) {
    .contenido-principal {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    /* Sidebar va primero en móvil */
    .sidebar-riegos {
        order: -1;
    }
}

@media (max-width: 768px) {
    .contenido-principal {
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .contenido-principal {
        gap: 0.75rem;
        margin-bottom: 1rem;
    }
}

.programacion-riegos,
.consumo-agua,
.sensores-agua,
.alertas-riego {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@media (max-width: 768px) {
    .programacion-riegos,
    .consumo-agua,
    .sensores-agua,
    .alertas-riego {
        padding: 1.25rem;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .programacion-riegos,
    .consumo-agua,
    .sensores-agua,
    .alertas-riego {
        padding: 1rem;
        border-radius: 8px;
    }
}

.sidebar-riegos {
    display: grid;
    gap: 1.5rem;
}

@media (max-width: 768px) {
    .sidebar-riegos {
        gap: 1rem;
    }
}

@media (max-width: 480px) {
    .sidebar-riegos {
        gap: 0.75rem;
    }
}

/* ===== PROGRAMA ITEMS RESPONSIVE ===== */
.programa-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    margin-bottom: 1rem;
    background: var(--bg-secondary);
    border-radius: 12px;
    border-left: 4px solid transparent;
    gap: 1rem;
}

@media (max-width: 768px) {
    .programa-item {
        flex-direction: column;
        align-items: flex-start;
        padding: 0.875rem;
        margin-bottom: 0.75rem;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .programa-item {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        gap: 0.5rem;
        border-radius: 8px;
        border-left-width: 3px;
    }
}

.programa-info {
    flex: 1;
}

@media (max-width: 768px) {
    .programa-info {
        width: 100%;
    }
}

.programa-titulo {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

@media (max-width: 768px) {
    .programa-titulo {
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .programa-titulo {
        font-size: 0.85rem;
    }
}

.programa-detalles {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

@media (max-width: 768px) {
    .programa-detalles {
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .programa-detalles {
        font-size: 0.75rem;
    }
}

.programa-acciones {
    display: flex;
    gap: 0.5rem;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .programa-acciones {
        width: 100%;
        justify-content: center;
        gap: 0.4rem;
    }
}

@media (max-width: 640px) {
    .programa-acciones {
        flex-direction: column;
        gap: 0.3rem;
    }
    
    .programa-acciones .btn {
        width: 100%;
        justify-content: center;
    }
}

/* ===== CONSUMO DE AGUA RESPONSIVE ===== */
.consumo-hoy {
    text-align: center;
    padding: 1.5rem;
    background: var(--bg-secondary);
    border-radius: 12px;
    margin-bottom: 1rem;
}

@media (max-width: 768px) {
    .consumo-hoy {
        padding: 1.25rem;
        border-radius: 8px;
        margin-bottom: 0.75rem;
    }
}

@media (max-width: 480px) {
    .consumo-hoy {
        padding: 1rem;
        border-radius: 6px;
        margin-bottom: 0.5rem;
    }
}

.consumo-valor {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.5rem;
}

@media (max-width: 768px) {
    .consumo-valor {
        font-size: 2rem;
    }
}

@media (max-width: 480px) {
    .consumo-valor {
        font-size: 1.75rem;
    }
}

/* ===== SENSORES RESPONSIVE ===== */
.sensor-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    background: var(--bg-secondary);
    border-radius: 8px;
    gap: 0.75rem;
}

@media (max-width: 768px) {
    .sensor-item {
        padding: 0.625rem;
        margin-bottom: 0.5rem;
        gap: 0.5rem;
        border-radius: 6px;
    }
}

@media (max-width: 640px) {
    .sensor-item {
        flex-direction: column;
        align-items: flex-start;
        text-align: left;
    }
}

@media (max-width: 480px) {
    .sensor-item {
        padding: 0.5rem;
        border-radius: 4px;
    }
}

.sensor-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
}

@media (max-width: 640px) {
    .sensor-info {
        width: 100%;
        margin-bottom: 0.5rem;
    }
}

@media (max-width: 480px) {
    .sensor-info {
        gap: 0.5rem;
    }
}

.sensor-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.875rem;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .sensor-icon {
        width: 28px;
        height: 28px;
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .sensor-icon {
        width: 24px;
        height: 24px;
        font-size: 0.75rem;
    }
}

.sensor-datos {
    text-align: right;
}

@media (max-width: 640px) {
    .sensor-datos {
        text-align: left;
        width: 100%;
    }
}

.sensor-valor {
    font-weight: 700;
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .sensor-valor {
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .sensor-valor {
        font-size: 0.85rem;
    }
}

.sensor-unidad {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

@media (max-width: 480px) {
    .sensor-unidad {
        font-size: 0.7rem;
    }
}

/* ===== ALERTAS RESPONSIVE ===== */
.alerta-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 12px;
    border-left: 4px solid transparent;
}

@media (max-width: 768px) {
    .alerta-item {
        padding: 0.875rem;
        margin-bottom: 0.75rem;
        gap: 0.75rem;
        border-radius: 8px;
    }
}

@media (max-width: 640px) {
    .alerta-item {
        flex-direction: column;
        align-items: flex-start;
    }
}

@media (max-width: 480px) {
    .alerta-item {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        gap: 0.5rem;
        border-radius: 6px;
        border-left-width: 3px;
    }
}

.alerta-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.875rem;
    flex-shrink: 0;
}

@media (max-width: 768px) {
    .alerta-icon {
        width: 28px;
        height: 28px;
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .alerta-icon {
        width: 24px;
        height: 24px;
        font-size: 0.75rem;
    }
}

.alerta-contenido {
    flex: 1;
}

@media (max-width: 640px) {
    .alerta-contenido {
        width: 100%;
    }
}

.alerta-titulo {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

@media (max-width: 768px) {
    .alerta-titulo {
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .alerta-titulo {
        font-size: 0.85rem;
    }
}

.alerta-descripcion {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

@media (max-width: 768px) {
    .alerta-descripcion {
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .alerta-descripcion {
        font-size: 0.75rem;
    }
}

/* ===== GRÁFICOS RESPONSIVE ===== */
.graficos-riego {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

@media (max-width: 1024px) {
    .graficos-riego {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
}

@media (max-width: 768px) {
    .graficos-riego {
        gap: 1rem;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .graficos-riego {
        gap: 0.75rem;
        margin-bottom: 1rem;
    }
}

.grafico-card {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@media (max-width: 768px) {
    .grafico-card {
        padding: 1.25rem;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .grafico-card {
        padding: 1rem;
        border-radius: 8px;
    }
}

.grafico-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}

@media (max-width: 768px) {
    .grafico-header {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 1rem;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .grafico-header {
        margin-bottom: 0.75rem;
        gap: 0.5rem;
    }
}

.grafico-titulo {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .grafico-titulo {
        font-size: 1rem;
    }
}

@media (max-width: 480px) {
    .grafico-titulo {
        font-size: 0.9rem;
    }
}

.periodo-selector {
    display: flex;
    gap: 0.25rem;
    flex-wrap: wrap;
}

@media (max-width: 768px) {
    .periodo-selector {
        width: 100%;
        justify-content: center;
        gap: 0.2rem;
    }
}

.periodo-btn {
    padding: 0.5rem 0.75rem;
    border: none;
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all 0.3s ease;
    white-space: nowrap;
    min-height: 36px;
}

@media (max-width: 768px) {
    .periodo-btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.8rem;
        border-radius: 4px;
        min-height: 40px;
    }
}

@media (max-width: 480px) {
    .periodo-btn {
        padding: 0.35rem 0.5rem;
        font-size: 0.75rem;
        min-height: 44px;
        flex: 1;
        text-align: center;
    }
}

/* Canvas de gráficos responsive */
#graficoConsumo,
#graficoHumedad {
    max-height: 250px !important;
    height: 250px !important;
}

@media (max-width: 768px) {
    #graficoConsumo,
    #graficoHumedad {
        max-height: 200px !important;
        height: 200px !important;
    }
}

@media (max-width: 480px) {
    #graficoConsumo,
    #graficoHumedad {
        max-height: 180px !important;
        height: 180px !important;
    }
}

/* ===== HISTORIAL RESPONSIVE ===== */
.historial-riegos {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@media (max-width: 768px) {
    .historial-riegos {
        padding: 1.25rem;
        border-radius: 12px;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .historial-riegos {
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
    }
}

.historial-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}

@media (max-width: 768px) {
    .historial-header {
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 1rem;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .historial-header {
        margin-bottom: 0.75rem;
        gap: 0.5rem;
    }
}

/* ===== MODAL RESPONSIVE ===== */
.modal-programar {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    padding: 2rem;
    align-items: center;
    justify-content: center;
}

@media (max-width: 768px) {
    .modal-programar {
        padding: 1rem;
        align-items: flex-start;
        padding-top: 2rem;
    }
}

@media (max-width: 480px) {
    .modal-programar {
        padding: 0;
        align-items: stretch;
    }
}

.modal-content {
    background: var(--bg-card);
    border-radius: 16px;
    max-width: 600px;
    margin: 0 auto;
    padding: 2rem;
    max-height: 90vh;
    overflow-y: auto;
    width: 90%;
}

@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        padding: 1.5rem;
        max-height: 85vh;
        border-radius: 12px;
    }
}

@media (max-width: 480px) {
    .modal-content {
        width: 100%;
        height: 100%;
        max-height: none;
        border-radius: 0;
        padding: 1rem;
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

@media (max-width: 768px) {
    .modal-header {
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .modal-header {
        margin-bottom: 1rem;
    }
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 0.25rem;
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
}

@media (max-width: 480px) {
    .modal-close {
        min-width: 48px;
        min-height: 48px;
        font-size: 1.25rem;
    }
}

.form-programar {
    display: grid;
    gap: 1rem;
}

@media (max-width: 768px) {
    .form-programar {
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .form-programar {
        gap: 0.5rem;
    }
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }
}

@media (max-width: 480px) {
    .form-row {
        gap: 0.5rem;
    }
}

.dias-selector {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 0.5rem;
}

@media (max-width: 768px) {
    .dias-selector {
        grid-template-columns: repeat(4, 1fr);
        gap: 0.4rem;
    }
}

@media (max-width: 480px) {
    .dias-selector {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.3rem;
    }
}

.dia-btn {
    padding: 0.5rem;
    border: 2px solid var(--border-color);
    background: var(--bg-secondary);
    border-radius: 6px;
    cursor: pointer;
    text-align: center;
    font-size: 0.875rem;
    font-weight: 600;
    transition: all 0.3s ease;
    min-height: 36px;
}

@media (max-width: 768px) {
    .dia-btn {
        padding: 0.4rem;
        font-size: 0.8rem;
        border-radius: 4px;
        min-height: 40px;
    }
}

@media (max-width: 480px) {
    .dia-btn {
        padding: 0.3rem;
        font-size: 0.75rem;
        min-height: 44px;
    }
}

.zona-selector {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 1rem;
}

@media (max-width: 768px) {
    .zona-selector {
        padding: 0.875rem;
        border-radius: 8px;
    }
}

@media (max-width: 480px) {
    .zona-selector {
        padding: 0.75rem;
        border-radius: 6px;
    }
}

.zona-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 0.5rem;
}

@media (max-width: 768px) {
    .zona-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.4rem;
    }
}

@media (max-width: 480px) {
    .zona-grid {
        grid-template-columns: 1fr;
        gap: 0.3rem;
    }
}

.zona-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    background: var(--bg-card);
    border-radius: 6px;
    font-size: 0.875rem;
}

@media (max-width: 768px) {
    .zona-item {
        padding: 0.4rem;
        font-size: 0.8rem;
        border-radius: 4px;
    }
}

@media (max-width: 480px) {
    .zona-item {
        padding: 0.5rem;
        font-size: 0.8rem;
        min-height: 44px;
    }
}

/* ===== BOTONES RESPONSIVE ===== */
.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    white-space: nowrap;
    min-height: 44px;
}

@media (max-width: 768px) {
    .btn {
        padding: 0.625rem 1.25rem;
        font-size: 0.8rem;
        border-radius: 6px;
        min-height: 48px;
    }
}

@media (max-width: 480px) {
    .btn {
        padding: 0.5rem 1rem;
        font-size: 0.75rem;
        border-radius: 4px;
        gap: 0.25rem;
    }
    
    /* Botones full-width cuando sea apropiado */
    .btn.mobile-full {
        width: 100%;
        justify-content: center;
    }
}

.btn-sm {
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    min-height: 36px;
}

@media (max-width: 768px) {
    .btn-sm {
        padding: 0.4rem 0.8rem;
        font-size: 0.7rem;
        min-height: 40px;
    }
}

@media (max-width: 480px) {
    .btn-sm {
        padding: 0.35rem 0.7rem;
        font-size: 0.65rem;
        min-height: 44px;
    }
}

/* ===== UTILIDADES RESPONSIVE ===== */
@media (max-width: 768px) {
    .hide-mobile {
        display: none !important;
    }
    
    .text-mobile-center {
        text-align: center !important;
    }
    
    .flex-mobile-column {
        flex-direction: column !important;
    }
    
    .w-mobile-full {
        width: 100% !important;
    }
}

@media (min-width: 769px) {
    .show-mobile {
        display: none !important;
    }
}

/* ===== SCROLL INDICATORS ===== */
@media (max-width: 768px) {
    .table-container {
        position: relative;
    }
    
    .table-container::after {
        content: '← Desliza para ver más';
        position: absolute;
        bottom: 0.5rem;
        right: 0.5rem;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 0.25rem 0.5rem;
        font-size: 0.7rem;
        border-radius: 4px;
        pointer-events: none;
        opacity: 0.8;
        z-index: 1;
    }
    
    .table-container::-webkit-scrollbar {
        height: 4px;
    }
    
    .table-container::-webkit-scrollbar-track {
        background: #f1f1f1;
    }
    
    .table-container::-webkit-scrollbar-thumb {
        background: #06b6d4;
        border-radius: 2px;
    }
}
    </style>
</head>
<body>
    <!-- Contenido principal -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1><i class="fas fa-tint me-2"></i>Sistema de Riego</h1>
                <p class="text-muted">Control y monitoreo de riego por sectores</p>
            </div>
            <div>
                <button class="btn btn-success me-2" onclick="mostrarModalNuevoRiego()">
                    <i class="fas fa-plus"></i> Programar Riego
                </button>
                <button class="btn btn-warning me-2" onclick="pararTodosLosRiegos()">
                    <i class="fas fa-stop"></i> Parar Todo
                </button>
                <button class="btn btn-info" onclick="mostrarEstadisticasRiego()">
                    <i class="fas fa-chart-line"></i> Estadísticas
                </button>
            </div>
        </div>
        
        <!-- Alertas de Estado -->
        <div id="alertasRiego" class="row mb-4" style="display: none;">
            <div class="col-12">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <span id="mensajeAlerta"></span>
                </div>
            </div>
        </div>
        
        <!-- Panel de Control Principal -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="medidor-agua">
                    <h6>Presión del Sistema</h6>
                    <div class="medidor-circular">
                        <div class="medidor-inner">
                            <h3 id="presionSistema">2.5</h3>
                            <small>BAR</small>
                        </div>
                    </div>
                    <div class="row text-center">
                        <div class="col-6">
                            <small class="text-muted">Min: 1.8</small>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">Max: 3.0</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="medidor-agua">
                    <h6>Caudal Actual</h6>
                    <div class="medidor-circular">
                        <div class="medidor-inner">
                            <h3 id="caudalActual">0</h3>
                            <small>L/min</small>
                        </div>
                    </div>
                    <div class="text-center">
                        <small class="text-muted">Promedio: <span id="caudalPromedio">45</span> L/min</small>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="riego-card text-center">
                    <i class="fas fa-clock fa-2x mb-2"></i>
                    <h3 id="sectoresTotales">0</h3>
                    <p>Sectores Totales</p>
                    <small>Activos: <span id="sectoresActivos">0</span></small>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="riego-card text-center">
                    <i class="fas fa-calendar fa-2x mb-2"></i>
                    <h3 id="riegosProgramados">0</h3>
                    <p>Riegos Hoy</p>
                    <small>Completados: <span id="riegosCompletados">0</span></small>
                </div>
            </div>
        </div>
        
        <!-- Control Manual Rápido -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="programacion-card">
                    <h5><i class="fas fa-hand-paper me-2"></i>Control Manual Rápido</h5>
                    <div class="row" id="controlesRapidos">
                        <!-- Los controles se generan dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sectores de Riego -->
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5><i class="fas fa-map me-2"></i>Sectores de Riego</h5>
                        <div>
                            <button class="btn btn-sm btn-outline-primary" onclick="actualizarEstadoSectores()">
                                <i class="fas fa-sync"></i> Actualizar
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="listaSectores"></div>
                    </div>
                </div>
            </div>
            
            <!-- Panel lateral -->
            <div class="col-md-4">
                <!-- Cronómetro de Riego Activo -->
                <div class="cronometro-riego mb-3" id="cronometroRiego" style="display: none;">
                    <h6><i class="fas fa-stopwatch me-2"></i>Riego en Curso</h6>
                    <h3 id="tiempoTranscurrido">00:00:00</h3>
                    <p id="sectorEnRiego">Sector: -</p>
                    <button class="btn btn-light btn-sm" onclick="detenerRiegoActivo()">
                        <i class="fas fa-stop"></i> Detener
                    </button>
                </div>
                
                <!-- Próximos Riegos Programados -->
                <div class="programacion-card">
                    <h5><i class="fas fa-clock me-2"></i>Próximos Riegos</h5>
                    <div id="proximosRiegos"></div>
                </div>
                
                <!-- Historial Reciente -->
                <div class="programacion-card">
                    <h5><i class="fas fa-history me-2"></i>Historial Reciente</h5>
                    <div id="historialReciente"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Programar Nuevo Riego -->
    <div class="modal fade" id="modalNuevoRiego" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-plus me-2"></i>Programar Nuevo Riego</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formNuevoRiego">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Configuración Básica</h6>
                                <div class="mb-3">
                                    <label class="form-label">Nombre del Programa</label>
                                    <input type="text" class="form-control" name="nombre" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Sector</label>
                                    <select class="form-select" name="sector" required>
                                        <option value="">Seleccionar sector</option>
                                    </select>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label class="form-label">Duración (min)</label>
                                        <input type="number" class="form-control" name="duracion" min="1" max="180" required>
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label">Caudal (L/min)</label>
                                        <input type="number" class="form-control" name="caudal" step="0.1" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <h6>Programación Temporal</h6>
                                <div class="mb-3">
                                    <label class="form-label">Tipo de Programación</label>
                                    <select class="form-select" name="tipoProgramacion" onchange="cambiarTipoProgramacion()">
                                        <option value="inmediato">Riego Inmediato</option>
                                        <option value="programado">Programado</option>
                                        <option value="automatico">Automático por Sensores</option>
                                    </select>
                                </div>
                                
                                <div id="opcionesProgramado" style="display: none;">
                                    <div class="row">
                                        <div class="col-6">
                                            <label class="form-label">Fecha</label>
                                            <input type="date" class="form-control" name="fecha">
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Hora</label>
                                            <input type="time" class="form-control" name="hora" value="06:00">
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <label class="form-check-label">
                                            <input type="checkbox" class="form-check-input" name="repetir">
                                            Repetir automáticamente
                                        </label>
                                        <div id="opcionesRepeticion" style="display: none;" class="mt-2">
                                            <select class="form-select" name="frecuencia">
                                                <option value="diario">Diario</option>
                                                <option value="semanal">Semanal</option>
                                                <option value="personalizado">Días específicos</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="opcionesAutomatico" style="display: none;">
                                    <label class="form-label">Condiciones de Activación</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="humedadSuelo">
                                        <label class="form-check-label">Humedad del suelo < 30%</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="temperatura">
                                        <label class="form-check-label">Temperatura > 28°C</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="sinLluvia">
                                        <label class="form-check-label">Sin lluvia por 24h</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <label class="form-label">Observaciones</label>
                            <textarea class="form-control" name="observaciones" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarNuevoRiego()">
                        <i class="fas fa-save"></i> Guardar Programación
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Control Manual Sector -->
    <div class="modal fade" id="modalControlManual" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-hand-paper me-2"></i>Control Manual</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <h6 id="sectorControlManual">Sector: -</h6>
                        <p class="text-muted">Estado actual: <span id="estadoControlManual">-</span></p>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Duración del riego (minutos)</label>
                        <input type="number" class="form-control" id="duracionManual" value="30" min="1" max="180">
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button class="btn btn-success btn-lg" onclick="iniciarRiegoManual()">
                            <i class="fas fa-play"></i> Iniciar Riego
                        </button>
                        <button class="btn btn-danger" onclick="detenerRiegoManual()">
                            <i class="fas fa-stop"></i> Detener Riego
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- Scripts del sistema -->
    <script src="js/firebase-config.js"></script>
    <script src="js/tree-manager.js"></script>
    <script src="js/riegos.js"></script>
    <script src="js/finca-navigation.js"></script>
</body>
</html>


